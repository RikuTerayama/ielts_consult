---
import { getCollection } from 'astro:content';
const posts = await getCollection('blog');
const tags = Array.from(new Set(posts.flatMap(p => p.data.tags || [])));
---
<html lang="ja">
  <head><meta charset="utf-8" /><title>タグ一覧</title></head>
  <body>
    <main style="max-width:920px;margin:2rem auto;padding:0 1rem;">
      <h1>タグ一覧</h1>
      <p><a href="/blog/">← ブログ一覧</a>　<a href="/categories/">カテゴリ一覧</a></p>
      {tags.length === 0 ? <p>タグが設定された記事がありません。まず記事を追加してください。</p> :
        <ul>{tags.map(t => <li><a href={`/tags/${encodeURIComponent(t)}/`}>#{t}</a></li>)}</ul>}
    </main>
  </body>
</html>
