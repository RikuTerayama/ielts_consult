---
import { getCollection } from 'astro:content';
const posts = await getCollection('blog');
const cats = Array.from(new Set(posts.map(p => p.data.category).filter(Boolean)));
---
<html lang="ja">
  <head><meta charset="utf-8" /><title>カテゴリ一覧</title></head>
  <body>
    <main style="max-width:920px;margin:2rem auto;padding:0 1rem;">
      <h1>カテゴリ一覧</h1>
      <p><a href="/blog/">← ブログ一覧</a>　<a href="/tags/">タグ一覧</a></p>
      {cats.length === 0 ? <p>カテゴリが設定された記事がありません。まず記事を追加してください。</p> :
        <ul>{cats.map(c => <li><a href={`/categories/${encodeURIComponent(c)}/`}>{c}</a></li>)}</ul>}
    </main>
  </body>
</html>
